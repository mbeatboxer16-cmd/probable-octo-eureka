<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆå•†å“URLç®¡ç†ãƒ„ãƒ¼ãƒ«">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆå•†å“ç®¡ç†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 10px;
        color: #333;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        overflow: hidden;
    }

    .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        text-align: center;
    }

    .header h1 {
        font-size: 24px;
        margin-bottom: 5px;
    }

    .header p {
        font-size: 14px;
        opacity: 0.9;
    }

    .tabs {
        display: flex;
        background: #f8f9fa;
        border-bottom: 2px solid #e0e0e0;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .tab {
        flex: 1;
        min-width: 100px;
        padding: 15px 10px;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        color: #666;
        transition: all 0.3s;
        white-space: nowrap;
    }

    .tab.active {
        color: #667eea;
        background: white;
        border-bottom: 3px solid #667eea;
    }

    .tab-content {
        display: none;
        padding: 20px;
        animation: fadeIn 0.3s;
    }

    .tab-content.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
        font-size: 14px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.3s;
        font-family: inherit;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-group textarea {
        min-height: 80px;
        resize: vertical;
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
    }

    @media (max-width: 600px) {
        .form-row {
            grid-template-columns: 1fr;
        }
    }

    .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        margin: 5px;
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
    }

    .btn-success {
        background: #28a745;
        color: white;
    }

    .btn-danger {
        background: #dc3545;
        color: white;
    }

    .btn-info {
        background: #17a2b8;
        color: white;
    }

    .btn-warning {
        background: #ffc107;
        color: #333;
    }

    .btn-small {
        padding: 6px 12px;
        font-size: 12px;
    }

    .filter-section {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .filter-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin-bottom: 10px;
    }

    .product-list {
        display: grid;
        gap: 15px;
    }

    .product-card {
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        padding: 15px;
        transition: all 0.3s;
    }

    .product-card:hover {
        border-color: #667eea;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .product-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 10px;
    }

    .product-title {
        font-size: 16px;
        font-weight: 600;
        color: #333;
        flex: 1;
    }

    .product-badges {
        display: flex;
        gap: 5px;
        flex-wrap: wrap;
        margin-bottom: 10px;
    }

    .badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
    }

    .badge-site {
        background: #667eea;
        color: white;
    }

    .badge-genre {
        background: #28a745;
        color: white;
    }

    .badge-price {
        background: #ffc107;
        color: #333;
    }

    .badge-status {
        background: #17a2b8;
        color: white;
    }

    .badge-priority {
        background: #dc3545;
        color: white;
    }

    .product-info {
        margin: 10px 0;
        font-size: 13px;
        color: #666;
    }

    .product-info p {
        margin: 5px 0;
    }

    .product-links {
        display: flex;
        gap: 5px;
        margin: 10px 0;
        flex-wrap: wrap;
    }

    .product-actions {
        display: flex;
        gap: 5px;
        margin-top: 10px;
        flex-wrap: wrap;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .stat-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
    }

    .stat-number {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 5px;
    }

    .stat-label {
        font-size: 14px;
        opacity: 0.9;
    }

    .alert {
        padding: 12px 15px;
        border-radius: 8px;
        margin-bottom: 15px;
        font-size: 14px;
    }

    .alert-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }

    .alert-danger {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }

    .alert-warning {
        background: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
    }

    .alert-info {
        background: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
    }

    .tag-input-container {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        padding: 8px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        min-height: 45px;
    }

    .tag-item {
        background: #667eea;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .tag-remove {
        cursor: pointer;
        font-weight: bold;
    }

    .tag-input-field {
        border: none;
        outline: none;
        flex: 1;
        min-width: 100px;
        padding: 4px;
    }

    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #999;
    }

    .empty-state-icon {
        font-size: 64px;
        margin-bottom: 20px;
    }

    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }

    .modal.active {
        display: flex;
    }

    .modal-content {
        background: white;
        border-radius: 12px;
        max-width: 600px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        padding: 20px;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e0e0e0;
    }

    .modal-close {
        font-size: 24px;
        cursor: pointer;
        color: #999;
    }

    .loading {
        text-align: center;
        padding: 20px;
    }

    .spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #667eea;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .copy-button {
        position: relative;
    }

    .copy-tooltip {
        position: absolute;
        background: #333;
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 12px;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        margin-bottom: 5px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s;
    }

    .copy-button.copied .copy-tooltip {
        opacity: 1;
    }

    @media (max-width: 768px) {
        .header h1 {
            font-size: 20px;
        }
        
        .tabs {
            font-size: 12px;
        }
        
        .tab {
            padding: 12px 8px;
            min-width: 80px;
        }
        
        .product-actions,
        .product-links {
            flex-direction: column;
        }
        
        .btn {
            width: 100%;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆå•†å“ç®¡ç†</h1>
            <p>å•†å“URLã‚’ã‚¹ãƒˆãƒƒã‚¯ã—ã¦åŠ¹ç‡çš„ã«ç®¡ç†</p>
        </div>

```
    <div class="tabs">
        <button class="tab active" onclick="switchTab('dashboard')">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</button>
        <button class="tab" onclick="switchTab('register')">å•†å“ç™»éŒ²</button>
        <button class="tab" onclick="switchTab('list')">å•†å“ä¸€è¦§</button>
        <button class="tab" onclick="switchTab('data')">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</button>
    </div>

    <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
    <div id="dashboard" class="tab-content active">
        <h2 style="margin-bottom: 20px;">ğŸ“ˆ çµ±è¨ˆæƒ…å ±</h2>
        <div class="stats-grid" id="statsGrid"></div>
        
        <h3 style="margin: 30px 0 15px 0;">ğŸ“‹ æœ€è¿‘ç™»éŒ²ã—ãŸå•†å“</h3>
        <div id="recentProducts"></div>
    </div>

    <!-- å•†å“ç™»éŒ² -->
    <div id="register" class="tab-content">
        <h2 style="margin-bottom: 20px;">â• æ–°è¦å•†å“ç™»éŒ²</h2>
        <div id="registerAlert"></div>
        
        <form id="productForm">
            <div class="form-group">
                <label>å•†å“å <span style="color: red;">*</span></label>
                <input type="text" id="productName" required placeholder="å•†å“åã‚’å…¥åŠ›">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>ã‚µã‚¤ãƒˆ <span style="color: red;">*</span></label>
                    <select id="site" required>
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="Amazon">Amazon</option>
                        <option value="æ¥½å¤©">æ¥½å¤©</option>
                        <option value="Yahoo!">Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°</option>
                        <option value="ãã®ä»–">ãã®ä»–</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ã‚¸ãƒ£ãƒ³ãƒ« <span style="color: red;">*</span></label>
                    <select id="genre" required>
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="æ—¥ç”¨å“">æ—¥ç”¨å“</option>
                        <option value="ä¾¿åˆ©ã‚°ãƒƒã‚º">ä¾¿åˆ©ã‚°ãƒƒã‚º</option>
                        <option value="å®¶é›»">å®¶é›»</option>
                        <option value="ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³">ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³</option>
                        <option value="é£Ÿå“">é£Ÿå“</option>
                        <option value="ç¾å®¹ãƒ»å¥åº·">ç¾å®¹ãƒ»å¥åº·</option>
                        <option value="ã‚¹ãƒãƒ¼ãƒ„">ã‚¹ãƒãƒ¼ãƒ„</option>
                        <option value="ãƒ›ãƒ“ãƒ¼">ãƒ›ãƒ“ãƒ¼</option>
                        <option value="ãã®ä»–">ãã®ä»–</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>å•†å“URL <span style="color: red;">*</span></label>
                <input type="url" id="productUrl" required placeholder="https://...">
            </div>

            <div class="form-group">
                <label>ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯</label>
                <input type="url" id="affiliateUrl" placeholder="https://...">
            </div>

            <div class="form-group">
                <label>å•†å“ç”»åƒURL</label>
                <input type="url" id="imageUrl" placeholder="https://...">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>ä¾¡æ ¼å¸¯ï¼ˆæœ€å°ï¼‰</label>
                    <select id="priceMin">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="0">0å††</option>
                        <option value="1000">1,000å††</option>
                        <option value="2000">2,000å††</option>
                        <option value="3000">3,000å††</option>
                        <option value="5000">5,000å††</option>
                        <option value="10000">10,000å††</option>
                        <option value="20000">20,000å††</option>
                        <option value="30000">30,000å††</option>
                        <option value="50000">50,000å††</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ä¾¡æ ¼å¸¯ï¼ˆæœ€å¤§ï¼‰</label>
                    <select id="priceMax">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="1000">1,000å††</option>
                        <option value="2000">2,000å††</option>
                        <option value="3000">3,000å††</option>
                        <option value="5000">5,000å††</option>
                        <option value="10000">10,000å††</option>
                        <option value="20000">20,000å††</option>
                        <option value="30000">30,000å††</option>
                        <option value="50000">50,000å††</option>
                        <option value="100000">100,000å††</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>å ±é…¬ç‡ï¼ˆ%ï¼‰</label>
                    <input type="number" id="commissionRate" min="0" max="100" step="0.1" placeholder="ä¾‹: 5.0">
                </div>

                <div class="form-group">
                    <label>æƒ³å®šå ±é…¬é¡ï¼ˆå††ï¼‰</label>
                    <input type="number" id="expectedReward" min="0" step="1" placeholder="ä¾‹: 500">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
                    <select id="status">
                        <option value="æœªæŠ•ç¨¿">æœªæŠ•ç¨¿</option>
                        <option value="æŠ•ç¨¿æ¸ˆã¿">æŠ•ç¨¿æ¸ˆã¿</option>
                        <option value="ä¸‹æ›¸ã">ä¸‹æ›¸ã</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>å„ªå…ˆåº¦</label>
                    <select id="priority">
                        <option value="ä¸­">ä¸­</option>
                        <option value="é«˜">é«˜</option>
                        <option value="ä½">ä½</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>ãŠæ°—ã«å…¥ã‚Š</label>
                <input type="checkbox" id="favorite" style="width: auto;">
            </div>

            <div class="form-group">
                <label>ã‚¿ã‚°ï¼ˆEnterã§è¿½åŠ ï¼‰</label>
                <div class="tag-input-container" id="tagContainer">
                    <input type="text" class="tag-input-field" id="tagInput" placeholder="ã‚¿ã‚°ã‚’å…¥åŠ›ã—ã¦Enter">
                </div>
            </div>

            <div class="form-group">
                <label>å•†å“èª¬æ˜ãƒ»ãƒ¡ãƒ¢</label>
                <textarea id="description" placeholder="å•†å“ã®èª¬æ˜ã‚„ãƒ¡ãƒ¢ã‚’å…¥åŠ›"></textarea>
            </div>

            <div class="form-group">
                <label>ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»å£ã‚³ãƒŸãƒ¡ãƒ¢</label>
                <textarea id="reviewMemo" placeholder="ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„å£ã‚³ãƒŸã®ãƒ¡ãƒ¢"></textarea>
            </div>

            <div class="form-group">
                <label>InstagramæŠ•ç¨¿æ—¥</label>
                <input type="date" id="postDate">
            </div>

            <div class="form-group">
                <label>æŠ•ç¨¿ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³</label>
                <textarea id="caption" placeholder="InstagramæŠ•ç¨¿ç”¨ã®ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³"></textarea>
            </div>

            <div class="form-group">
                <label>ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°</label>
                <textarea id="hashtags" placeholder="#example #affiliate"></textarea>
            </div>

            <div class="form-group">
                <label>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒ¢</label>
                <textarea id="performanceMemo" placeholder="ã‚¯ãƒªãƒƒã‚¯æ•°ã€æˆç´„æ•°ãªã©ã®ãƒ¡ãƒ¢"></textarea>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button type="submit" class="btn btn-primary">ğŸ’¾ å•†å“ã‚’ç™»éŒ²</button>
                <button type="button" class="btn btn-secondary" onclick="resetForm()">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </form>
    </div>

    <!-- å•†å“ä¸€è¦§ -->
    <div id="list" class="tab-content">
        <h2 style="margin-bottom: 20px;">ğŸ“‹ å•†å“ä¸€è¦§</h2>
        
        <div class="filter-section">
            <h3 style="margin-bottom: 15px;">ğŸ” ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ»æ¤œç´¢</h3>
            <div class="filter-row">
                <input type="text" id="searchKeyword" placeholder="ğŸ” ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢" style="padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                
                <select id="filterSite" style="padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <option value="">å…¨ã‚µã‚¤ãƒˆ</option>
                    <option value="Amazon">Amazon</option>
                    <option value="æ¥½å¤©">æ¥½å¤©</option>
                    <option value="Yahoo!">Yahoo!</option>
                    <option value="ãã®ä»–">ãã®ä»–</option>
                </select>

                <select id="filterGenre" style="padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <option value="">å…¨ã‚¸ãƒ£ãƒ³ãƒ«</option>
                    <option value="æ—¥ç”¨å“">æ—¥ç”¨å“</option>
                    <option value="ä¾¿åˆ©ã‚°ãƒƒã‚º">ä¾¿åˆ©ã‚°ãƒƒã‚º</option>
                    <option value="å®¶é›»">å®¶é›»</option>
                    <option value="ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³">ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³</option>
                    <option value="é£Ÿå“">é£Ÿå“</option>
                    <option value="ç¾å®¹ãƒ»å¥åº·">ç¾å®¹ãƒ»å¥åº·</option>
                    <option value="ã‚¹ãƒãƒ¼ãƒ„">ã‚¹ãƒãƒ¼ãƒ„</option>
                    <option value="ãƒ›ãƒ“ãƒ¼">ãƒ›ãƒ“ãƒ¼</option>
                    <option value="ãã®ä»–">ãã®ä»–</option>
                </select>

                <select id="filterStatus" style="padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <option value="">å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</option>
                    <option value="æœªæŠ•ç¨¿">æœªæŠ•ç¨¿</option>
                    <option value="æŠ•ç¨¿æ¸ˆã¿">æŠ•ç¨¿æ¸ˆã¿</option>
                    <option value="ä¸‹æ›¸ã">ä¸‹æ›¸ã</option>
                </select>

                <select id="filterPriority" style="padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <option value="">å…¨å„ªå…ˆåº¦</option>
                    <option value="é«˜">é«˜</option>
                    <option value="ä¸­">ä¸­</option>
                    <option value="ä½">ä½</option>
                </select>
            </div>

            <div class="filter-row" style="margin-top: 10px;">
                <select id="filterPriceRange" style="padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <option value="">å…¨ä¾¡æ ¼å¸¯</option>
                    <option value="0-1000">0ã€œ1,000å††</option>
                    <option value="1000-3000">1,000ã€œ3,000å††</option>
                    <option value="3000-5000">3,000ã€œ5,000å††</option>
                    <option value="5000-10000">5,000ã€œ10,000å††</option>
                    <option value="10000-20000">10,000ã€œ20,000å††</option>
                    <option value="20000-50000">20,000ã€œ50,000å††</option>
                    <option value="50000-999999">50,000å††ã€œ</option>
                </select>

                <select id="sortBy" style="padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <option value="newest">æ–°ã—ã„é †</option>
                    <option value="oldest">å¤ã„é †</option>
                    <option value="priceHigh">ä¾¡æ ¼ãŒé«˜ã„é †</option>
                    <option value="priceLow">ä¾¡æ ¼ãŒå®‰ã„é †</option>
                    <option value="priority">å„ªå…ˆåº¦é †</option>
                </select>

                <label style="display: flex; align-items: center; padding: 10px;">
                    <input type="checkbox" id="filterFavorite" style="width: auto; margin-right: 8px;">
                    ãŠæ°—ã«å…¥ã‚Šã®ã¿
                </label>
            </div>

            <div style="text-align: center; margin-top: 15px;">
                <button class="btn btn-primary" onclick="applyFilters()">ğŸ” æ¤œç´¢</button>
                <button class="btn btn-secondary" onclick="clearFilters()">ğŸ”„ ã‚¯ãƒªã‚¢</button>
            </div>
        </div>

        <div id="productCount" style="margin-bottom: 10px; color: #666;"></div>
        <div class="product-list" id="productList"></div>
    </div>

    <!-- ãƒ‡ãƒ¼ã‚¿ç®¡ç† -->
    <div id="data" class="tab-content">
        <h2 style="margin-bottom: 20px;">ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h2>
        
        <div class="alert alert-info">
            ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®LocalStorageã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã™ã‚‹ã¨æ¶ˆãˆã‚‹ãŸã‚ã€å®šæœŸçš„ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚
        </div>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h3 style="margin-bottom: 15px;">ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</h3>
            <p style="margin-bottom: 15px; color: #666;">ç™»éŒ²æ¸ˆã¿ã®å•†å“ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p>
            <button class="btn btn-success" onclick="exportData()">ğŸ“¥ ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
        </div>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h3 style="margin-bottom: 15px;">ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
            <p style="margin-bottom: 15px; color: #666;">ä»¥å‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚</p>
            <div class="alert alert-warning">
                âš ï¸ ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã¨ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚äº‹å‰ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
            </div>
            <input type="file" id="importFile" accept=".json" style="margin-bottom: 10px;">
            <button class="btn btn-info" onclick="importData()">ğŸ“¤ ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
        </div>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
            <h3 style="margin-bottom: 15px;">ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿å‰Šé™¤</h3>
            <p style="margin-bottom: 15px; color: #666;">å…¨ã¦ã®å•†å“ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚</p>
            <button class="btn btn-danger" onclick="confirmDeleteAll()">ğŸ—‘ï¸ å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤</button>
        </div>

        <div id="dataAlert" style="margin-top: 20px;"></div>
    </div>
</div>

<!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>âœï¸ å•†å“ç·¨é›†</h3>
            <span class="modal-close" onclick="closeEditModal()">&times;</span>
        </div>
        <div id="editForm"></div>
    </div>
</div>

<script>
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
    let products = [];
    let currentEditId = null;
    let tags = [];

    // åˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', function() {
        loadProducts();
        updateDashboard();
        displayProducts();
        setupTagInput();
        setupFormValidation();
    });

    // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
    function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        
        event.target.classList.add('active');
        document.getElementById(tabName).classList.add('active');

        if (tabName === 'list') {
            applyFilters();
        } else if (tabName === 'dashboard') {
            updateDashboard();
        }
    }

    // LocalStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
    function loadProducts() {
        try {
            const stored = localStorage.getItem('affiliateProducts');
            if (stored) {
                products = JSON.parse(stored);
                // ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
                products = products.filter(p => p && p.id && p.productName);
            }
        } catch (error) {
            console.error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
            showAlert('registerAlert', 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger');
            products = [];
        }
    }

    // LocalStorageã«ãƒ‡ãƒ¼ã‚¿ä¿å­˜
    function saveProducts() {
        try {
            localStorage.setItem('affiliateProducts', JSON.stringify(products));
            return true;
        } catch (error) {
            console.error('ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
            if (error.name === 'QuotaExceededError') {
                showAlert('registerAlert', 'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚', 'danger');
            } else {
                showAlert('registerAlert', 'ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger');
            }
            return false;
        }
    }

    // ã‚¿ã‚°å…¥åŠ›ã®è¨­å®š
    function setupTagInput() {
        const tagInput = document.getElementById('tagInput');
        const tagContainer = document.getElementById('tagContainer');

        tagInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const value = tagInput.value.trim();
                if (value && !tags.includes(value)) {
                    tags.push(value);
                    renderTags();
                    tagInput.value = '';
                }
            }
        });
    }

    // ã‚¿ã‚°è¡¨ç¤º
    function renderTags() {
        const tagContainer = document.getElementById('tagContainer');
        const tagInput = document.getElementById('tagInput');
        
        // æ—¢å­˜ã®ã‚¿ã‚°ã‚’å‰Šé™¤ï¼ˆå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ä¿æŒï¼‰
        const existingTags = tagContainer.querySelectorAll('.tag-item');
        existingTags.forEach(tag => tag.remove());

        // ã‚¿ã‚°ã‚’è¿½åŠ 
        tags.forEach((tag, index) => {
            const tagElement = document.createElement('div');
            tagElement.className = 'tag-item';
            tagElement.innerHTML = `
                ${tag}
                <span class="tag-remove" onclick="removeTag(${index})">Ã—</span>
            `;
            tagContainer.insertBefore(tagElement, tagInput);
        });
    }

    // ã‚¿ã‚°å‰Šé™¤
    function removeTag(index) {
        tags.splice(index, 1);
        renderTags();
    }

    // ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    function setupFormValidation() {
        const form = document.getElementById('productForm');
        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯
            const productName = document.getElementById('productName').value.trim();
            const site = document.getElementById('site').value;
            const genre = document.getElementById('genre').value;
            const productUrl = document.getElementById('productUrl').value.trim();

            if (!productName || !site || !genre || !productUrl) {
                showAlert('registerAlert', 'å¿…é ˆé …ç›®ã‚’å…¨ã¦å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚', 'danger');
                return;
            }

            // URLå½¢å¼ãƒã‚§ãƒƒã‚¯
            if (!isValidUrl(productUrl)) {
                showAlert('registerAlert', 'å•†å“URLã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚', 'danger');
                return;
            }

            const affiliateUrl = document.getElementById('affiliateUrl').value.trim();
            if (affiliateUrl && !isValidUrl(affiliateUrl)) {
                showAlert('registerAlert', 'ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚', 'danger');
                return;
            }

            const imageUrl = document.getElementById('imageUrl').value.trim();
            if (imageUrl && !isValidUrl(imageUrl)) {
                showAlert('registerAlert', 'å•†å“ç”»åƒURLã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚', 'danger');
                return;
            }

            // ä¾¡æ ¼å¸¯ãƒã‚§ãƒƒã‚¯
            const priceMin = parseInt(document.getElementById('priceMin').value) || 0;
            const priceMax = parseInt(document.getElementById('priceMax').value) || 999999;
            
            if (priceMin > priceMax) {
                showAlert('registerAlert', 'ä¾¡æ ¼å¸¯ã®æœ€å°å€¤ãŒæœ€å¤§å€¤ã‚ˆã‚Šå¤§ãããªã£ã¦ã„ã¾ã™ã€‚', 'danger');
                return;
            }

            // å•†å“ç™»éŒ²
            registerProduct();
        });
    }

    // URLå½¢å¼ãƒã‚§ãƒƒã‚¯
    function isValidUrl(url) {
        try {
            new URL(url);
            return true;
        } catch (error) {
            return false;
        }
    }

    // å•†å“ç™»éŒ²
    function registerProduct() {
        const product = {
            id: Date.now(),
            productName: document.getElementById('productName').value.trim(),
            site: document.getElementById('site').value,
            genre: document.getElementById('genre').value,
            productUrl: document.getElementById('productUrl').value.trim(),
            affiliateUrl: document.getElementById('affiliateUrl').value.trim(),
            imageUrl: document.getElementById('imageUrl').value.trim(),
            priceMin: parseInt(document.getElementById('priceMin').value) || 0,
            priceMax: parseInt(document.getElementById('priceMax').value) || 999999,
            commissionRate: parseFloat(document.getElementById('commissionRate').value) || 0,
            expectedReward: parseInt(document.getElementById('expectedReward').value) || 0,
            status: document.getElementById('status').value,
            priority: document.getElementById('priority').value,
            favorite: document.getElementById('favorite').checked,
            tags: [...tags],
            description: document.getElementById('description').value.trim(),
            reviewMemo: document.getElementById('reviewMemo').value.trim(),
            postDate: document.getElementById('postDate').value,
            caption: document.getElementById('caption').value.trim(),
            hashtags: document.getElementById('hashtags').value.trim(),
            performanceMemo: document.getElementById('performanceMemo').value.trim(),
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString()
        };

        products.push(product);
        
        if (saveProducts()) {
            showAlert('registerAlert', 'âœ… å•†å“ã‚’ç™»éŒ²ã—ã¾ã—ãŸï¼', 'success');
            resetForm();
            updateDashboard();
            
            // ä¸€è¦§ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ
            setTimeout(() => {
                switchTab('list');
            }, 1500);
        }
    }

    // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
    function resetForm() {
        document.getElementById('productForm').reset();
        tags = [];
        renderTags();
    }

    // ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
    function showAlert(containerId, message, type) {
        const container = document.getElementById(containerId);
        container.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
        
        setTimeout(() => {
            container.innerHTML = '';
        }, 5000);
    }

    // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°
    function updateDashboard() {
        const statsGrid = document.getElementById('statsGrid');
        const recentProducts = document.getElementById('recentProducts');

        // çµ±è¨ˆè¨ˆç®—
        const totalProducts = products.length;
        const postedProducts = products.filter(p => p.status === 'æŠ•ç¨¿æ¸ˆã¿').length;
        const favorites = products.filter(p => p.favorite).length;
        const totalExpectedReward = products.reduce((sum, p) => sum + (p.expectedReward || 0), 0);

        // çµ±è¨ˆè¡¨ç¤º
        statsGrid.innerHTML = `
            <div class="stat-card">
                <div class="stat-number">${totalProducts}</div>
                <div class="stat-label">ç·å•†å“æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">${postedProducts}</div>
                <div class="stat-label">æŠ•ç¨¿æ¸ˆã¿</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">${favorites}</div>
                <div class="stat-label">ãŠæ°—ã«å…¥ã‚Š</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">Â¥${totalExpectedReward.toLocaleString()}</div>
                <div class="stat-label">æƒ³å®šå ±é…¬åˆè¨ˆ</div>
            </div>
        `;

        // æœ€è¿‘ã®å•†å“
        const recent = [...products]
            .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
            .slice(0, 5);

        if (recent.length === 0) {
            recentProducts.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ“¦</div><p>ã¾ã å•†å“ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p></div>';
        } else {
            recentProducts.innerHTML = recent.map(p => createProductCard(p)).join('');
        }
    }

    // å•†å“ã‚«ãƒ¼ãƒ‰ä½œæˆ
    function createProductCard(product) {
        const priceRange = product.priceMin || product.priceMax 
            ? `${product.priceMin ? product.priceMin.toLocaleString() : '0'}å††ã€œ${product.priceMax ? product.priceMax.toLocaleString() : ''}å††`
            : 'ä¾¡æ ¼æœªè¨­å®š';

        return `
            <div class="product-card">
                <div class="product-header">
                    <div class="product-title">${escapeHtml(product.productName)}</div>
                    ${product.favorite ? '<span style="font-size: 20px;">â­</span>' : ''}
                </div>
                
                <div class="product-badges">
                    <span class="badge badge-site">${escapeHtml(product.site)}</span>
                    <span class="badge badge-genre">${escapeHtml(product.genre)}</span>
                    <span class="badge badge-price">${priceRange}</span>
                    <span class="badge badge-status">${escapeHtml(product.status)}</span>
                    ${product.priority === 'é«˜' ? '<span class="badge badge-priority">å„ªå…ˆåº¦: é«˜</span>' : ''}
                </div>

                ${product.tags && product.tags.length > 0 ? `
                    <div class="product-badges">
                        ${product.tags.map(tag => `<span class="badge" style="background: #6c757d; color: white;">#${escapeHtml(tag)}</span>`).join('')}
                    </div>
                ` : ''}

                <div class="product-info">
                    ${product.description ? `<p>ğŸ“ ${escapeHtml(product.description)}</p>` : ''}
                    ${product.commissionRate ? `<p>ğŸ’° å ±é…¬ç‡: ${product.commissionRate}% / æƒ³å®šå ±é…¬: Â¥${(product.expectedReward || 0).toLocaleString()}</p>` : ''}
                    ${product.postDate ? `<p>ğŸ“… æŠ•ç¨¿æ—¥: ${product.postDate}</p>` : ''}
                    <p style="color: #999; font-size: 12px;">ç™»éŒ²æ—¥: ${new Date(product.createdAt).toLocaleDateString()}</p>
                </div>

                <div class="product-links">
                    <button class="btn btn-info btn-small copy-button" onclick="copyToClipboard('${escapeHtml(product.productUrl)}', this)">
                        ğŸ“‹ å•†å“URL
                        <span class="copy-tooltip">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</span>
                    </button>
                    ${product.affiliateUrl ? `
                        <button class="btn btn-success btn-small copy-button" onclick="copyToClipboard('${escapeHtml(product.affiliateUrl)}', this)">
                            ğŸ”— ã‚¢ãƒ•ã‚£ãƒªURL
                            <span class="copy-tooltip">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</span>
                        </button>
                    ` : ''}
                </div>

                <div class="product-actions">
                    <button class="btn btn-primary btn-small" onclick="editProduct(${product.id})">âœï¸ ç·¨é›†</button>
                    <button class="btn btn-danger btn-small" onclick="deleteProduct(${product.id})">ğŸ—‘ï¸ å‰Šé™¤</button>
                    <button class="btn btn-secondary btn-small" onclick="toggleFavorite(${product.id})">
                        ${product.favorite ? 'â­ è§£é™¤' : 'â˜† ãŠæ°—ã«å…¥ã‚Š'}
                    </button>
                </div>
            </div>
        `;
    }

    // HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
    function copyToClipboard(text, button) {
        navigator.clipboard.writeText(text).then(() => {
            button.classList.add('copied');
            setTimeout(() => {
                button.classList.remove('copied');
            }, 2000);
        }).catch(err => {
            console.error('ã‚³ãƒ”ãƒ¼å¤±æ•—:', err);
            alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ');
        });
    }

    // ãŠæ°—ã«å…¥ã‚Šãƒˆã‚°ãƒ«
    function toggleFavorite(id) {
        const product = products.find(p => p.id === id);
        if (product) {
            product.favorite = !product.favorite;
            product.updatedAt = new Date().toISOString();
            saveProducts();
            applyFilters();
            updateDashboard();
        }
    }

    // å•†å“ç·¨é›†
    function editProduct(id) {
        const product = products.find(p => p.id === id);
        if (!product) return;

        currentEditId = id;
        tags = [...(product.tags || [])];

        const modal = document.getElementById('editModal');
        const editForm = document.getElementById('editForm');

        editForm.innerHTML = `
            <form id="editProductForm">
                <div class="form-group">
                    <label>å•†å“å <span style="color: red;">*</span></label>
                    <input type="text" id="edit_productName" value="${escapeHtml(product.productName)}" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ã‚µã‚¤ãƒˆ</label>
                        <select id="edit_site">
                            <option value="Amazon" ${product.site === 'Amazon' ? 'selected' : ''}>Amazon</option>
                            <option value="æ¥½å¤©" ${product.site === 'æ¥½å¤©' ? 'selected' : ''}>æ¥½å¤©</option>
                            <option value="Yahoo!" ${product.site === 'Yahoo!' ? 'selected' : ''}>Yahoo!</option>
                            <option value="ãã®ä»–" ${product.site === 'ãã®ä»–' ? 'selected' : ''}>ãã®ä»–</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ã‚¸ãƒ£ãƒ³ãƒ«</label>
                        <select id="edit_genre">
                            <option value="æ—¥ç”¨å“" ${product.genre === 'æ—¥ç”¨å“' ? 'selected' : ''}>æ—¥ç”¨å“</option>
                            <option value="ä¾¿åˆ©ã‚°ãƒƒã‚º" ${product.genre === 'ä¾¿åˆ©ã‚°ãƒƒã‚º' ? 'selected' : ''}>ä¾¿åˆ©ã‚°ãƒƒã‚º</option>
                            <option value="å®¶é›»" ${product.genre === 'å®¶é›»' ? 'selected' : ''}>å®¶é›»</option>
                            <option value="ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³" ${product.genre === 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³' ? 'selected' : ''}>ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³</option>
                            <option value="é£Ÿå“" ${product.genre === 'é£Ÿå“' ? 'selected' : ''}>é£Ÿå“</option>
                            <option value="ç¾å®¹ãƒ»å¥åº·" ${product.genre === 'ç¾å®¹ãƒ»å¥åº·' ? 'selected' : ''}>ç¾å®¹ãƒ»å¥åº·</option>
                            <option value="ã‚¹ãƒãƒ¼ãƒ„" ${product.genre === 'ã‚¹ãƒãƒ¼ãƒ„' ? 'selected' : ''}>ã‚¹ãƒãƒ¼ãƒ„</option>
                            <option value="ãƒ›ãƒ“ãƒ¼" ${product.genre === 'ãƒ›ãƒ“ãƒ¼' ? 'selected' : ''}>ãƒ›ãƒ“ãƒ¼</option>
                            <option value="ãã®ä»–" ${product.genre === 'ãã®ä»–' ? 'selected' : ''}>ãã®ä»–</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>å•†å“URL</label>
                    <input type="url" id="edit_productUrl" value="${escapeHtml(product.productUrl)}">
                </div>

                <div class="form-group">
                    <label>ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯</label>
                    <input type="url" id="edit_affiliateUrl" value="${escapeHtml(product.affiliateUrl || '')}">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ä¾¡æ ¼å¸¯ï¼ˆæœ€å°ï¼‰</label>
                        <input type="number" id="edit_priceMin" value="${product.priceMin || ''}">
                    </div>
                    <div class="form-group">
                        <label>ä¾¡æ ¼å¸¯ï¼ˆæœ€å¤§ï¼‰</label>
                        <input type="number" id="edit_priceMax" value="${product.priceMax || ''}">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
                        <select id="edit_status">
                            <option value="æœªæŠ•ç¨¿" ${product.status === 'æœªæŠ•ç¨¿' ? 'selected' : ''}>æœªæŠ•ç¨¿</option>
                            <option value="æŠ•ç¨¿æ¸ˆã¿" ${product.status === 'æŠ•ç¨¿æ¸ˆã¿' ? 'selected' : ''}>æŠ•ç¨¿æ¸ˆã¿</option>
                            <option value="ä¸‹æ›¸ã" ${product.status === 'ä¸‹æ›¸ã' ? 'selected' : ''}>ä¸‹æ›¸ã</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>å„ªå…ˆåº¦</label>
                        <select id="edit_priority">
                            <option value="é«˜" ${product.priority === 'é«˜' ? 'selected' : ''}>é«˜</option>
                            <option value="ä¸­" ${product.priority === 'ä¸­' ? 'selected' : ''}>ä¸­</option>
                            <option value="ä½" ${product.priority === 'ä½' ? 'selected' : ''}>ä½</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>ã‚¿ã‚°ï¼ˆEnterã§è¿½åŠ ï¼‰</label>
                    <div class="tag-input-container" id="edit_tagContainer">
                        <input type="text" class="tag-input-field" id="edit_tagInput" placeholder="ã‚¿ã‚°ã‚’å…¥åŠ›ã—ã¦Enter">
                    </div>
                </div>

                <div class="form-group">
                    <label>å•†å“èª¬æ˜ãƒ»ãƒ¡ãƒ¢</label>
                    <textarea id="edit_description">${escapeHtml(product.description || '')}</textarea>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button type="submit" class="btn btn-primary">ğŸ’¾ ä¿å­˜</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </form>
        `;

        // ç·¨é›†ç”¨ã‚¿ã‚°å…¥åŠ›è¨­å®š
        const editTagInput = document.getElementById('edit_tagInput');
        renderEditTags();
        
        editTagInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const value = editTagInput.value.trim();
                if (value && !tags.includes(value)) {
                    tags.push(value);
                    renderEditTags();
                    editTagInput.value = '';
                }
            }
        });

        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
        document.getElementById('editProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            saveEditedProduct();
        });

        modal.classList.add('active');
    }

    // ç·¨é›†ç”¨ã‚¿ã‚°è¡¨ç¤º
    function renderEditTags() {
        const tagContainer = document.getElementById('edit_tagContainer');
        const tagInput = document.getElementById('edit_tagInput');
        
        const existingTags = tagContainer.querySelectorAll('.tag-item');
        existingTags.forEach(tag => tag.remove());

        tags.forEach((tag, index) => {
            const tagElement = document.createElement('div');
            tagElement.className = 'tag-item';
            tagElement.innerHTML = `
                ${tag}
                <span class="tag-remove" onclick="removeTag(${index}); renderEditTags();">Ã—</span>
            `;
            tagContainer.insertBefore(tagElement, tagInput);
        });
    }

    // ç·¨é›†ä¿å­˜
    function saveEditedProduct() {
        const product = products.find(p => p.id === currentEditId);
        if (!product) return;

        const productUrl = document.getElementById('edit_productUrl').value.trim();
        const affiliateUrl = document.getElementById('edit_affiliateUrl').value.trim();

        if (productUrl && !isValidUrl(productUrl)) {
            alert('å•†å“URLã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚');
            return;
        }

        if (affiliateUrl && !isValidUrl(affiliateUrl)) {
            alert('ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚');
            return;
        }

        product.productName = document.getElementById('edit_productName').value.trim();
        product.site = document.getElementById('edit_site').value;
        product.genre = document.getElementById('edit_genre').value;
        product.productUrl = productUrl;
        product.affiliateUrl = affiliateUrl;
        product.priceMin = parseInt(document.getElementById('edit_priceMin').value) || 0;
        product.priceMax = parseInt(document.getElementById('edit_priceMax').value) || 999999;
        product.status = document.getElementById('edit_status').value;
        product.priority = document.getElementById('edit_priority').value;
        product.tags = [...tags];
        product.description = document.getElementById('edit_description').value.trim();
        product.updatedAt = new Date().toISOString();

        if (saveProducts()) {
            closeEditModal();
            applyFilters();
            updateDashboard();
            alert('âœ… ä¿å­˜ã—ã¾ã—ãŸï¼');
        }
    }

    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
    function closeEditModal() {
        document.getElementById('editModal').classList.remove('active');
        currentEditId = null;
        tags = [];
    }

    // å•†å“å‰Šé™¤
    function deleteProduct(id) {
        if (!confirm('æœ¬å½“ã«ã“ã®å•†å“ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;

        products = products.filter(p => p.id !== id);
        saveProducts();
        applyFilters();
        updateDashboard();
    }

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨
    function applyFilters() {
        const keyword = document.getElementById('searchKeyword').value.toLowerCase();
        const site = document.getElementById('filterSite').value;
        const genre = document.getElementById('filterGenre').value;
        const status = document.getElementById('filterStatus').value;
        const priority = document.getElementById('filterPriority').value;
        const priceRange = document.getElementById('filterPriceRange').value;
        const favoriteOnly = document.getElementById('filterFavorite').checked;
        const sortBy = document.getElementById('sortBy').value;

        let filtered = [...products];

        // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
        if (keyword) {
            filtered = filtered.filter(p => 
                p.productName.toLowerCase().includes(keyword) ||
                (p.description && p.description.toLowerCase().includes(keyword)) ||
                (p.tags && p.tags.some(tag => tag.toLowerCase().includes(keyword)))
            );
        }

        // ã‚µã‚¤ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        if (site) {
            filtered = filtered.filter(p => p.site === site);
        }

        // ã‚¸ãƒ£ãƒ³ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        if (genre) {
            filtered = filtered.filter(p => p.genre === genre);
        }

        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        if (status) {
            filtered = filtered.filter(p => p.status === status);
        }

        // å„ªå…ˆåº¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        if (priority) {
            filtered = filtered.filter(p => p.priority === priority);
        }

        // ä¾¡æ ¼å¸¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        if (priceRange) {
            const [min, max] = priceRange.split('-').map(Number);
            filtered = filtered.filter(p => {
                const productMin = p.priceMin || 0;
                const productMax = p.priceMax || 999999;
                return productMin >= min && productMax <= max;
            });
        }

        // ãŠæ°—ã«å…¥ã‚Šãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        if (favoriteOnly) {
            filtered = filtered.filter(p => p.favorite);
        }

        // ã‚½ãƒ¼ãƒˆ
        switch (sortBy) {
            case 'newest':
                filtered.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                break;
            case 'oldest':
                filtered.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
                break;
            case 'priceHigh':
                filtered.sort((a, b) => (b.priceMax || 0) - (a.priceMax || 0));
                break;
            case 'priceLow':
                filtered.sort((a, b) => (a.priceMin || 0) - (b.priceMin || 0));
                break;
            case 'priority':
                const priorityOrder = { 'é«˜': 3, 'ä¸­': 2, 'ä½': 1 };
                filtered.sort((a, b) => priorityOrder[b.priority] - priorityOrder[a.priority]);
                break;
        }

        displayProducts(filtered);
    }

    // å•†å“ä¸€è¦§è¡¨ç¤º
    function displayProducts(filteredProducts = null) {
        const productList = document.getElementById('productList');
        const productCount = document.getElementById('productCount');
        const displayProducts = filteredProducts || products;

        productCount.textContent = `${displayProducts.length}ä»¶ã®å•†å“`;

        if (displayProducts.length === 0) {
            productList.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ”</div><p>å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p></div>';
        } else {
            productList.innerHTML = displayProducts.map(p => createProductCard(p)).join('');
        }
    }

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¯ãƒªã‚¢
    function clearFilters() {
        document.getElementById('searchKeyword').value = '';
        document.getElementById('filterSite').value = '';
        document.getElementById('filterGenre').value = '';
        document.getElementById('filterStatus').value = '';
        document.getElementById('filterPriority').value = '';
        document.getElementById('filterPriceRange').value = '';
        document.getElementById('filterFavorite').checked = false;
        document.getElementById('sortBy').value = 'newest';
        applyFilters();
    }

    // ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
    function exportData() {
        if (products.length === 0) {
            showAlert('dataAlert', 'âš ï¸ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚', 'warning');
            return;
        }

        try {
            const dataStr = JSON.stringify(products, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `affiliate-products-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showAlert('dataAlert', 'âœ… ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼', 'success');
        } catch (error) {
            console.error('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼:', error);
            showAlert('dataAlert', 'âŒ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger');
        }
    }

    // ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
    function importData() {
        const fileInput = document.getElementById('importFile');
        const file = fileInput.files[0];

        if (!file) {
            showAlert('dataAlert', 'âš ï¸ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚', 'warning');
            return;
        }

        if (!file.name.endsWith('.json')) {
            showAlert('dataAlert', 'âŒ JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚', 'danger');
            return;
        }

        const reader = new FileReader();
        
        reader.onload = function(e) {
            try {
                const importedData = JSON.parse(e.target.result);
                
                // ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
                if (!Array.isArray(importedData)) {
                    throw new Error('ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã™ã€‚');
                }

                // å„å•†å“ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
                const validData = importedData.filter(p => 
                    p && p.id && p.productName && p.site && p.genre
                );

                if (validData.length === 0) {
                    throw new Error('æœ‰åŠ¹ãªå•†å“ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚');
                }

                if (!confirm(`${validData.length}ä»¶ã®å•†å“ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ãŒã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ`)) {
                    return;
                }

                products = validData;
                
                if (saveProducts()) {
                    showAlert('dataAlert', `âœ… ${validData.length}ä»¶ã®å•†å“ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼`, 'success');
                    updateDashboard();
                    applyFilters();
                    fileInput.value = '';
                }
            } catch (error) {
                console.error('ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                showAlert('dataAlert', `âŒ ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: ${error.message}`, 'danger');
            }
        };

        reader.onerror = function() {
            showAlert('dataAlert', 'âŒ ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'danger');
        };

        reader.readAsText(file);
    }

    // å…¨ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
    function confirmDeleteAll() {
        if (!confirm('æœ¬å½“ã«å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) return;
        if (!confirm('æœ€çµ‚ç¢ºèªï¼šå…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) return;

        products = [];
        saveProducts();
        updateDashboard();
        displayProducts();
        showAlert('dataAlert', 'âœ… å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚', 'success');
    }

    // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
    document.getElementById('editModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeEditModal();
        }
    });
</script>
```

</body>
</html>